(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c9708"],{"58c2":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"page-category"}},[a("loading",{attrs:{value:t.loading}}),a("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-widget",{attrs:{title:"Categorias"}},[a("div",{staticStyle:{"min-height":"400px"},attrs:{slot:"widget-content","fill-height":""},slot:"widget-content"},[a("v-card",[a("v-btn",{attrs:{absolute:"",dark:"",fab:"",top:"",right:"",small:"",color:"pink"},on:{click:t.onCreate}},[a("v-icon",[t._v("add")])],1),a("v-toolbar",{attrs:{card:"",color:"white"}},[a("v-text-field",{attrs:{flat:"",solo:"","prepend-icon":"search",placeholder:"Procurar categoria por nome","hide-details":"",maxlength:"50"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-divider"),a("v-card-text",{staticClass:"pa-0"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.dataTable.headers,search:t.search,items:t.items,"rows-per-page-items":[10,25,50,{text:"Todos",value:-1}],"item-key":"id",pagination:t.dataTable.pagination},on:{"update:pagination":function(e){return t.$set(t.dataTable,"pagination",e)}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.id))]),a("td",[t._v(t._s(e.item.name))]),a("td",[a("v-btn",{attrs:{depressed:"",outline:"",icon:"",fab:"",dark:"",color:"info",small:""},on:{click:function(a){return t.onEdit(e.item)}}},[a("v-icon",[t._v("edit")])],1),a("v-btn",{attrs:{depressed:"",outline:"",icon:"",fab:"",dark:"",color:"pink",small:""},on:{click:function(a){return t.confirmDeletion(e.item.id)}}},[a("v-icon",[t._v("delete")])],1)],1)]}}])})],1)],1),a("category-create"),a("category-edit")],1)])],1)],1)],1)],1)},r=[],o=(a("96cf"),a("3b8d")),i=a("cebc"),c=a("2f62"),s=a("129e"),l=a("866a"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"470"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),t.onCancel(e))}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",{staticClass:"fc-card-title"},[a("h2",{staticClass:"subheading"},[t._v("Criar categoria")])]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{sm12:""}},[a("v-form",{ref:"categoryCreation",on:{submit:function(t){t.preventDefault()}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSubmit(e)}}},[a("v-text-field",{attrs:{autofocus:"","prepend-icon":"fas fa-list-ol",label:"Nome da categoria",maxlength:"70",rules:t.rules.name,clearable:"","clear-icon":"fas fa-backspace fa-sm"},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name","string"===typeof e?e.trim():e)},expression:"category.name"}})],1)],1)],1)],1),a("v-card-actions",{staticClass:"pb-3"},[a("v-spacer"),a("v-btn",{attrs:{color:"info",disabled:!t.isCompleted,loading:t.loading},on:{click:t.onSubmit}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v(" Salvar\n      ")],1),a("v-btn",{attrs:{color:"error",flat:""},on:{click:t.onCancel}},[a("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v(" Cancelar\n      ")],1)],1)],1)],1)},d=[],f=(a("7f7f"),{name:"category-create",data:function(){var t=this;return{active:!1,category:{name:null},loading:!1,rules:{name:[function(t){return!!t||"Categoria é obrigatório"},function(e){return t.$utils.countLength(e,2)||"Categoria deve ter pelo menos 2 caracteres"}]}}},computed:{isCompleted:function(){return!!this.category.name}},watch:{active:function(){this.$refs.categoryCreation.reset()}},mounted:function(){var t=this;window.getApp._events.CREATE_CATEGORY||window.getApp.$on("CREATE_CATEGORY",function(e){t.active=e})},methods:Object(i["a"])({},Object(c["b"])({createCategory:"CREATE_CATEGORY"}),{onCancel:function(){this.$refs.categoryCreation.reset(),this.active=!1},onSubmit:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.categoryCreation.validate()){t.next=6;break}return this.loading=!0,t.next=4,this.createCategory({data:this.category,auth:this.auth});case 4:e=t.sent,e.data?(this.category.name=null,this.loading=this.active=!e,window.getApp.$emit("CATEGORY_CREATED",!0)):(this.loading=!1,this.$swal("Erro",this.$utils.formatErrors(e.errors),"error"));case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()})}),g=f,v=a("2877"),p=a("6544"),m=a.n(p),h=a("8336"),C=a("b0af"),b=a("99d9"),y=a("12b2"),E=a("169a"),w=a("0e8f"),x=a("4bd4"),T=a("132d"),k=a("a722"),_=a("9910"),A=a("2677"),O=Object(v["a"])(g,u,d,!1,null,null,null),V=O.exports;m()(O,{VBtn:h["a"],VCard:C["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:y["a"],VDialog:E["a"],VFlex:w["a"],VForm:x["a"],VIcon:T["a"],VLayout:k["a"],VSpacer:_["a"],VTextField:A["a"]});var $=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"","max-width":"470"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:(e.stopPropagation(),t.onCancel(e))}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-card",[a("v-card-title",{staticClass:"fc-card-title"},[a("h2",{staticClass:"subheading"},[t._v("Editar categoria")])]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[t.category?a("v-flex",{attrs:{sm12:""}},[a("v-form",{ref:"categoryEdition",on:{submit:function(t){t.preventDefault()}}},[a("v-text-field",{attrs:{"prepend-icon":"fas fa-list-ol",label:"Nome da categoria",maxlength:"70",autofocus:"",rules:t.rules.name,clearable:"","clear-icon":"fas fa-backspace fa-sm"},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name","string"===typeof e?e.trim():e)},expression:"category.name"}})],1)],1):t._e()],1)],1),a("v-card-actions",{staticClass:"pb-3"},[a("v-spacer"),a("v-btn",{attrs:{color:"info",disabled:!t.isCompleted,loading:t.loading},on:{click:function(e){return t.onUpdate(t.category.id)}}},[a("v-icon",{attrs:{left:""}},[t._v("refresh")]),t._v(" Atualizar\n      ")],1),a("v-btn",{attrs:{color:"error",flat:""},on:{click:t.onCancel}},[a("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v(" Cancelar\n      ")],1)],1)],1)],1)},R=[],D=a("2ef0"),G=a.n(D),S={name:"category-edit",data:function(){var t=this;return{active:!1,category:{id:null,name:null},loading:!1,rules:{name:[function(t){return!!t||"O nome da categoria é obrigatório"},function(e){return t.$utils.countLength(e,2)||"O nome da categoria deve ter pelo menos 2 caracteres"}]}}},computed:{isCompleted:function(){return!!this.category.name}},mounted:function(){var t=this;window.getApp._events.EDIT_CATEGORY||window.getApp.$on("EDIT_CATEGORY",function(e){t.category=JSON.parse(JSON.stringify(e)),t.active=!0})},methods:Object(i["a"])({},Object(c["b"])({updateCategory:"UPDATE_CATEGORY"}),{onCancel:function(){this.$refs.categoryEdition.reset(),this.active=!1},onUpdate:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.categoryEdition.validate()){t.next=6;break}return this.loading=!0,t.next=4,this.updateCategory({data:this.category,auth:this.auth});case 4:a=t.sent,a.data?(this.category=G.a.mapValues(this.category,function(){return null}),this.loading=this.active=!a,window.getApp.$emit("CATEGORY_UPDATED",!0)):(this.loading=!1,this.$swal("Erro",this.$utils.formatErrors(a.errors),"error"));case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()})},j=S,Y=Object(v["a"])(j,$,R,!1,null,null,null),B=Y.exports;m()(Y,{VBtn:h["a"],VCard:C["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:y["a"],VDialog:E["a"],VFlex:w["a"],VForm:x["a"],VIcon:T["a"],VLayout:k["a"],VSpacer:_["a"],VTextField:A["a"]});var I={name:"Categories",components:{VWidget:s["a"],Loading:l["a"],CategoryCreate:V,CategoryEdit:B},data:function(){return{loading:!1,search:"",dataTable:{headers:[{text:"ID",value:"id"},{text:"Nome",value:"name"},{text:"Ações",value:"",sortable:!1}],pagination:{descending:!0,sortBy:"id",page:1},items:[]}}},computed:Object(i["a"])({},Object(c["c"])({items:"GET_CATEGORIES"})),created:function(){this.loading=!0,this.getCategories(this.auth)&&(this.loading=!1)},mounted:function(){var t=this;window.getApp.$on("CATEGORY_CREATED",function(e){return t.$swal("Sucesso","Categoria criada com sucesso","success")}),window.getApp.$on("CATEGORY_UPDATED",function(e){return t.$swal("Sucesso","Categoria atualizada com sucesso","success")})},methods:Object(i["a"])({},Object(c["b"])({getCategories:"GET_CATEGORIES",deleteCategory:"DELETE_CATEGORY"}),{onCreate:function(){window.getApp.$emit("CREATE_CATEGORY",!0)},onEdit:function(t){window.getApp.$emit("EDIT_CATEGORY",t)},confirmDeletion:function(t){var e=this;this.$swal({title:"Tem certeza?",text:"Esta ação não poderá ser desfeita",type:"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(n){var r;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(!n.value){a.next=7;break}return e.loading=!0,a.next=4,e.deleteCategory({id:t,auth:e.auth});case 4:r=a.sent,console.log(r),r.data?(e.loading=!1,e.$swal("Sucesso",r.data,"success")):(e.loading=!1,e.$swal("Erro","Não foi possível apagar esta categoria","error"));case 7:case"end":return a.stop()}},a)}));return function(t){return a.apply(this,arguments)}}())}})},F=I,L=a("a523"),N=a("8fea"),P=a("ce7e6"),U=a("71d9"),J=Object(v["a"])(F,n,r,!1,null,null,null);e["default"]=J.exports;m()(J,{VBtn:h["a"],VCard:C["a"],VCardText:b["b"],VContainer:L["a"],VDataTable:N["a"],VDivider:P["a"],VFlex:w["a"],VIcon:T["a"],VLayout:k["a"],VTextField:A["a"],VToolbar:U["a"]})}}]);
//# sourceMappingURL=chunk-2d0c9708.ed201467.js.map